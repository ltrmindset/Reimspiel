<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Reimspiel - 2 Zielboxen</title>
<style>
body { font-family: Arial, sans-serif; text-align: center; background: #f9f9f9; }
.container { display: flex; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
.card { width: 140px; height: 140px; margin: 0; border: 2px solid #555; border-radius: 10px; background: #fff;
display: flex; justify-content: center; align-items: center; cursor: grab; box-shadow: 1px 1px 4px rgba(0,0,0,0.2);
transition: transform 0.3s, background-color 0.3s; }
.card img { width: 100%; height: 100%; object-fit: contain; border-radius: 6px; pointer-events: none; }
.dropzone { width: 160px; height: 160px; margin: 8px; border: 2px dashed #999; border-radius: 10px; background: #eee;
display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 5px; transition: background-color 0.3s; }
.dropzone img { width: 100%; height: 100%; object-fit: contain; border-radius: 6px; }
.correct { border: 3px solid green; background: #c8f7c5; }
.wrong { border: 3px solid red; background: #f7c5c5; }
button { margin: 20px; padding: 10px 20px; font-size: 16px; border-radius: 8px; border: none; background: #4CAF50; color: #fff; cursor: pointer; display: none; }
button:hover { background: #45a049; }
#results { margin-top: 20px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
.result-pair { display: flex; justify-content: center; align-items: center; gap: 0px; opacity: 0; }
.fade-in { animation: fadeIn 0.8s ease forwards; }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes highlight {
  0% { background-color: #c8f7c5; }
  50% { background-color: #a0e7a0; }
  100% { background-color: #c8f7c5; }
}
.highlight { animation: highlight 0.4s ease; }
</style>
</head>
<body>
<h1>ðŸŽµ Reimpaare finden ðŸŽµ</h1>
<p id="instructions">Ziehe das passende Bild in die richtige Box!</p>

<div id="zones" class="container"></div>
<div id="cards" class="container"></div>
<div id="results"></div>
<button id="newGameBtn" onclick="newGame()">ðŸ”„ Neu mischen</button>

<script>
const allPairs = {
  socken:"glocken", schwein:"bein", klo:"floh", pupille:"brille",
  mund:"hund", sitz:"blitz", tuch:"buch", zaun:"baum",
  rÃ¼ssel:"schlÃ¼ssel", band:"hand", mÃ¼cke:"brÃ¼cke", nase:"vase",
  eule:"beule", fliege:"ziege", ohr:"tor", dose:"hose",
  tisch:"fisch", haus:"maus"
};

let selectedPairs = {};
let correctCount = 0;

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

function newGame(){
  document.getElementById("cards").innerHTML="";
  document.getElementById("zones").innerHTML="";
  document.getElementById("results").innerHTML="";
  document.getElementById("instructions").style.display = "block";
  document.getElementById("newGameBtn").style.display="none";
  correctCount=0;

  const keys = Object.keys(allPairs);
  shuffle(keys);
  const chosen = keys.slice(0,2);
  selectedPairs = {};
  chosen.forEach(k=>selectedPairs[k]=allPairs[k]);

  // Dropzones
  const zonesContainer = document.getElementById("zones");
  chosen.forEach(k=>{
    const dz = document.createElement("div");
    dz.className = "dropzone";
    dz.dataset.match = selectedPairs[k];
    const img = document.createElement("img");
    img.src = `${k}.png`;
    img.alt = k;
    dz.appendChild(img);
    zonesContainer.appendChild(dz);
  });

  // Karten
  let cards = chosen.map(k=>({img: `${selectedPairs[k]}.png`, match: selectedPairs[k]}));
  const remaining = keys.filter(k=>!chosen.includes(k));
  shuffle(remaining);
  const distractors = remaining.slice(0,2).map(k=>({img: `${allPairs[k]}.png`, match: allPairs[k]}));
  cards = cards.concat(distractors);
  shuffle(cards);

  const cardsContainer = document.getElementById("cards");
  cards.forEach(c=>{
    const div = document.createElement("div");
    div.className = "card";
    div.draggable = true;
    div.dataset.match = c.match;
    const img = document.createElement("img");
    img.src = c.img;
    img.alt = c.match;
    div.appendChild(img);
    cardsContainer.appendChild(div);
  });

  enableDragDrop();
}

function enableDragDrop(){
  document.querySelectorAll(".card").forEach(card=>{
    card.addEventListener("dragstart", e=>{
      e.dataTransfer.setData("text/plain", e.currentTarget.dataset.match);
    });
  });

  document.querySelectorAll(".dropzone").forEach(zone=>{
    zone.addEventListener("dragover", e=>e.preventDefault());
    zone.addEventListener("drop", e=>{
      e.preventDefault();
      const cardMatch = e.dataTransfer.getData("text/plain");
      const cardEl = [...document.querySelectorAll(".card")].find(c=>c.dataset.match===cardMatch);

      if(zone.classList.contains("correct")) return;

      if(cardMatch === zone.dataset.match){
        // Highlight Animation
        zone.classList.add("highlight");

        // Korrekt ablegen
        zone.classList.add("correct");
        const img = document.createElement("img");
        img.src = `${cardMatch}.png`;
        img.alt = cardMatch;
        zone.appendChild(img);
        cardEl.remove();
        correctCount++;

        if(correctCount===2){
          document.getElementById("zones").innerHTML="";
          document.getElementById("cards").innerHTML="";
          document.getElementById("instructions").style.display = "none";
          showResults();
        }

        // Animation zurÃ¼cksetzen nach Ende
        setTimeout(()=> zone.classList.remove("highlight"), 400);
      } else {
        zone.classList.add("wrong");
        cardEl.style.transform="translateY(-20px)";
        setTimeout(()=>{
          zone.classList.remove("wrong");
          cardEl.style.transform="translateY(0)";
        },500);
      }
    });
  });
}

function showResults(){
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "<h2>ðŸŽ‰ Gefundene Reimpaare ðŸŽ‰</h2>";

  Object.entries(selectedPairs).forEach(([a,b], index)=>{
    const pairDiv = document.createElement("div");
    pairDiv.className = "result-pair fade-in";
    pairDiv.style.animationDelay = `${index * 0.2}s`;

    const divA = document.createElement("div");
    divA.className = "card";
    const imgA = document.createElement("img");
    imgA.src = `${a}.png`;
    imgA.alt = a;
    divA.appendChild(imgA);

    const divB = document.createElement("div");
    divB.className = "card";
    const imgB = document.createElement("img");
    imgB.src = `${b}.png`;
    imgB.alt = b;
    divB.appendChild(imgB);

    // Paare ohne LÃ¼cke nebeneinander
    pairDiv.appendChild(divA);
    pairDiv.appendChild(divB);

    resultsDiv.appendChild(pairDiv);
  });

  document.getElementById("newGameBtn").style.display="inline-block";
}

window.onload = newGame;
</script>
</body>
</html>
